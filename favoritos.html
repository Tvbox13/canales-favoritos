<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Reproductor DC TV</title>
<script src="https://cdn.jsdelivr.net/npm/clappr@latest/dist/clappr.min.js"></script>
<style>
  body { background: black; color: white; font-family: Arial; text-align: center; }
  .canal { cursor: pointer; margin: 10px; padding: 10px; background: #222; border-radius: 5px; }
  #player-wrapper { display: none; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; background: black; z-index: 9999; }
  #player { width: 100%; height: 100%; }
</style>
</head>
<body>
  <h1>DC TV - Selecciona canal</h1>

  <div id="lista-canales">
    <div class="canal" data-url="https://bitdash-a.akamaihd.net/content/sintel/hls/playlist.m3u8">Canal Prueba Sintel</div>
    <div class="canal" data-url="https://test-streams.mux.dev/x36xhzz/x36xhzz.m3u8">Canal Prueba Mux</div>
    <!-- Pon aquÃ­ tus URLs reales que funcionen -->
  </div>

  <div id="player-wrapper">
    <div id="player"></div>
  </div>

<script>
  const playerWrapper = document.getElementById('player-wrapper');
  const playerContainer = document.getElementById('player');
  let playerInstance = null;

  document.getElementById('lista-canales').addEventListener('click', e => {
    if(e.target.classList.contains('canal')){
      const url = e.target.getAttribute('data-url');
      if(playerInstance) playerInstance.destroy();
      playerWrapper.style.display = 'block';
      playerInstance = new Clappr.Player({
        source: url,
        parentId: '#player',
        autoPlay: true,
        height: '100%',
        width: '100%',
      });
    }
  });

  // Cerrar player con ESC
  document.addEventListener('keydown', e => {
    if(e.key === "Escape" && playerWrapper.style.display === 'block'){
      playerWrapper.style.display = 'none';
      if(playerInstance) playerInstance.destroy();
      playerInstance = null;
    }
  });
</script>
</body>
</html>
